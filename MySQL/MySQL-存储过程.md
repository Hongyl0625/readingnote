[toc]

# 存储过程和函数

- 存储过程和函数：类似于java中的方法
- 优势：

1. 提高代码的重用性
2. 简化操作

## 存储过程

### 存储过程的概述

- 含义：一组预先编译好的SQL语句的集合，理解成批处理语句
- 优势：

1. 提高代码的重用性
2. 简化操作
3. 减少了编译次数并且减少了和数据库服务器的连接次数，提高了效率

### 存储过程的语法

#### 一、创建语法

```mysql
create procedure 存储过程名(参数列表)
begin
	存储过程体（一组合法的SQL语句）
end
```

注意：

1. 参数列表包含三部分

   参数模式 参数名称 参数类型

   举例：

   in stuname varchar(20)

   参数模式

   in：该参数可以作为输入，也就是该参数需要调用方传入值；

   out：该参数可以作为输出，也就是该参数可以作为返回值；

   inout：该参数及可以作为输入，也可以作为输出。也就是该参数既需要传入值，又可以返回值；

2. 如果存储过程体仅仅**只有一句话，begin end 可以省略**

3. 存储过程体中每条SQL语句的结尾必须添加分号；存储过程的结尾可以使用delimiter重新设置。

   语法：

   delimiter 结束标记

   案例：

   delimiter $

#### 二、调用语法

```mysql
call 存储过程名(实参列表);
```

### 案例

#### 1.空参列表

​	向admin表插入五条记录

```mysql
# delimiter 定界符
delimiter $ -- 将结束标记由分号替换为美元符
# 创建存储过程
create procedure myp1()
begin
	insert into admin (username,`password`)
	values ('john1','0000'),
				 ('lily','0000'),
				 ('rose','0000'),
				 ('jack','0000'),
				 ('tom','0000'),
end $
# 调用存储过程
call myp1() $
# 查看插入结果
select * from admin $
```

#### 2.有参列表





